<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loan Calculator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="loan-calculator">
        <form id="loanForm" class="loan-form">
            <!-- Total Cost -->
            <div class="form-group">
                <label for="loanAmount" title="Total Cost (€)">Total Cost (€)</label>
                <input 
                    type="number" 
                    id="loanAmount" 
                    name="loanAmount" 
                    min="1000" 
                    max="60000" 
                    step="1000" 
                    value="25000"
                    required
                    aria-describedby="loanAmountHelp"
                >
                <small id="loanAmountHelp">Max 60,000€</small>
            </div>

            <!-- Subsidy Percentage -->
            <div class="form-group">
                <label for="subsidyPercent" title="Subsidy Percentage (%)">Subsidy (%)</label>
                <input 
                    type="number" 
                    id="subsidyPercent" 
                    name="subsidyPercent" 
                    min="0" 
                    max="100" 
                    step="5" 
                    value="20"
                    required
                    aria-describedby="subsidyHelp"
                >
                <small id="subsidyHelp">0-100%</small>
            </div>

            <!-- Downpayment -->
            <div class="form-group">
                <label for="downpayment" title="Downpayment (€)">Downpayment (€)</label>
                <input 
                    type="number" 
                    id="downpayment" 
                    name="downpayment" 
                    min="0" 
                    max="60000" 
                    step="1000" 
                    value="5000"
                    required
                    aria-describedby="downpaymentHelp"
                >
                <small id="downpaymentHelp">Min 0€</small>
                <input 
                    type="range" 
                    id="downpaymentSlider" 
                    min="0" 
                    max="60000" 
                    step="1000" 
                    value="5000"
                    aria-describedby="downpaymentHelp"
                >
            </div>

            <!-- Loan Duration -->
            <div class="form-group">
                <label for="loanDuration" title="Loan Duration">Duration</label>
                <input 
                    type="number" 
                    id="loanDuration" 
                    name="loanDuration" 
                    min="1" 
                    max="20" 
                    step="1" 
                    value="12"
                    required
                    aria-describedby="durationHelp"
                >
                <span class="duration-unit">yrs</span>
                <small id="durationHelp">1-20 years</small>
                <input 
                    type="range" 
                    id="loanDurationSlider" 
                    min="1" 
                    max="20" 
                    step="1" 
                    value="12"
                    aria-describedby="durationHelp"
                >
            </div>

            <!-- Results Section -->
            <div class="results-section" aria-live="polite" aria-atomic="true">
                <h3>Loan Summary</h3>
                <div class="result-item">
                    <span class="result-label" title="Loan amount financed">Loan amount:</span>
                    <span class="result-value" id="financedAmount">—</span>
                </div>
                <div class="result-item">
                    <span class="result-label" title="Subsidy amount">Subsidy:</span>
                    <span class="result-value" id="subsidyAmount">—</span>
                </div>
                <div class="result-item">
                    <span class="result-label" title="Monthly payment">Monthly:</span>
                    <span class="result-value" id="monthlyPayment">—</span>
                </div>
            </div>

            <!-- Contact Popup Modal -->
            <div id="contactPopup" class="contact-popup" style="display: none;">
                <div class="popup-header">
                    <h4>Contact Information</h4>
                    <button type="button" class="close-btn" id="closePopup">&times;</button>
                </div>
                <div class="popup-content">
                    <!-- Email -->
                    <div class="form-group">
                        <label for="popupEmail" title="Contact Email">Email</label>
                        <input 
                            type="email" 
                            id="popupEmail" 
                            name="popupEmail" 
                            required
                            placeholder="your@email.com"
                            aria-describedby="popupEmailHelp"
                        >
                        <small id="popupEmailHelp">For quote</small>
                        <div class="error-message" id="popupEmailError" style="display: none;"></div>
                    </div>

                    <!-- Phone Number -->
                    <div class="form-group">
                        <label for="popupPhone" title="Phone Number">Phone</label>
                        <input 
                            type="tel" 
                            id="popupPhone" 
                            name="popupPhone" 
                            required
                            placeholder="+34 600 000 000"
                            aria-describedby="popupPhoneHelp"
                        >
                        <small id="popupPhoneHelp">International format</small>
                        <div class="error-message" id="popupPhoneError" style="display: none;"></div>
                    </div>

                    <!-- Send Button -->
                    <button type="button" id="sendBtn" class="send-btn">
                        Send
                    </button>
                </div>
            </div>

            <!-- Hidden Contact Section -->
            <div id="contactSection" class="contact-section" style="display: none;">
                <!-- Email -->
                <div class="form-group">
                    <label for="email" title="Contact Email">Email</label>
                    <input 
                        type="email" 
                        id="email" 
                        name="email" 
                        required
                        placeholder="your@email.com"
                        aria-describedby="emailHelp"
                    >
                    <small id="emailHelp">For quote</small>
                    <div class="error-message" id="emailError" style="display: none;"></div>
                </div>

                <!-- Phone Number -->
                <div class="form-group">
                    <label for="phone" title="Phone Number">Phone</label>
                    <input 
                        type="tel" 
                        id="phone" 
                        name="phone" 
                        required
                        placeholder="+34 600 000 000"
                        aria-describedby="phoneHelp"
                    >
                    <small id="phoneHelp">International format</small>
                    <div class="error-message" id="phoneError" style="display: none;"></div>
                </div>

                <!-- Consent Checkbox -->
                <div class="form-group checkbox-group">
                    <label class="checkbox-label" for="consent">
                        <input 
                            type="checkbox" 
                            id="consent" 
                            name="consent" 
                            required
                            aria-describedby="consentHelp"
                        >
                        <span class="checkmark"></span>
                        <span class="consent-text">I agree to receive loan information</span>
                    </label>
                    <small id="consentHelp">Required to continue</small>
                    <div class="error-message" id="consentError" style="display: none;"></div>
                </div>
            </div>

            <!-- Contact Button -->
            <button 
                type="button" 
                id="contactBtn" 
                class="contact-btn"
                aria-describedby="buttonHelp"
            >
                Contact Us
            </button>
            <small id="buttonHelp">Click to reveal contact form</small>
        </form>
    </div>

    <script src="script.js"></script>
</body>
</html>
